{"version":3,"sources":["hooks/http.hook.js","context/AuthContext.js","components/Loader.js","components/LinksList.js","pages/LinksPage.js","pages/AuthPage.js","hooks/message.hook.js","pages/CreatePage.js","components/LinkCard.js","pages/DetailPage.js","components/Navbar.js","App.js","hooks/auth.hook.js","routes.js","serviceWorker.js","index.js"],"names":["useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","console","log","json","data","ok","Error","message","clearError","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","Loader","className","LinksList","props","links","length","map","e","key","_id","style","maxWidth","overflow","href","from","target","rel","to","clicks","Date","date","toLocaleDateString","LinksPage","setLinks","useContext","fetchLinks","Authorization","fetched","useEffect","AuthPage","auth","text","window","M","toast","html","email","password","form","setForm","updateTextFields","changeHandler","evt","name","value","registerHandler","loginHandler","htmlFor","placeholder","id","type","onChange","disabled","onClick","CreatePage","history","useHistory","link","setLink","pressHandler","event","push","padding","onKeyPress","LinkCard","DetailPage","linkId","useParams","getLink","Navbar","preventDefault","App","setToken","ready","setReady","setUserId","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","exact","path","useRoutes","Provider","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.8849e0e7.chunk.js","sourcesContent":["import { useState, useCallback } from 'react'\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const request = useCallback(\r\n    async (url, method = 'GET', body = null, headers = {}) => {\r\n      setLoading(true)\r\n      try {\r\n        if (body) {\r\n          body = JSON.stringify(body)\r\n          headers['Content-Type'] = 'application/json'\r\n        }\r\n\r\n        const response = await fetch(url, { method, body, headers })\r\n        console.log(response)\r\n        const data = await response.json()\r\n        console.log(data)\r\n\r\n        if (!response.ok) {\r\n          throw new Error(data.message || 'Something went wrong')\r\n        }\r\n\r\n        setLoading(false)\r\n        return data\r\n      } catch (e) {\r\n        console.log(e.message)\r\n        setLoading(false)\r\n        setError(e.message)\r\n        throw e\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  const clearError = useCallback(() => setError(null), [])\r\n\r\n  return { loading, request, error, clearError }\r\n}\r\n","import { createContext } from 'react'\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n  token: null,\r\n  userId: null,\r\n  login: noop,\r\n  logout: noop,\r\n  isAuthenticated: false,\r\n})\r\n","import React from 'react'\r\n\r\nfunction Loader() {\r\n  return (\r\n    <div className='progress'>\r\n      <div className='indeterminate' />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loader\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction LinksList(props) {\r\n  if (!props.links.length) {\r\n    return <p>No links available</p>\r\n  }\r\n  return (\r\n    <div>\r\n      {' '}\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Original</th>\r\n            <th>Short</th>\r\n            <th>Clicks</th>\r\n            <th>Created</th>\r\n            <th>Open</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {props.links.map(e => {\r\n            return (\r\n              <tr key={e._id}>\r\n                <td style={{ maxWidth: '25vw', overflow: 'hidden' }}>\r\n                  <a href={e.from} target='_blank' rel='noreferrer noopener'>\r\n                    {e.from}\r\n                  </a>\r\n                </td>\r\n                <td>\r\n                  {' '}\r\n                  <a href={e.to} target='_blank' rel='noreferrer noopener'>\r\n                    {e.to}\r\n                  </a>\r\n                </td>\r\n                <td>{e.clicks}</td>\r\n                <td>{new Date(e.date).toLocaleDateString()}</td>\r\n                <td>\r\n                  <Link to={`/detail/${e._id}`}>Open</Link>\r\n                </td>\r\n              </tr>\r\n            )\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LinksList\r\n","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport Loader from '../components/Loader'\r\nimport LinksList from '../components/LinksList'\r\n\r\nfunction LinksPage() {\r\n  const [links, setLinks] = useState([])\r\n  const { loading, request } = useHttp()\r\n  const { token } = useContext(AuthContext)\r\n\r\n  const fetchLinks = useCallback(async () => {\r\n    try {\r\n      const fetched = await request('./api/link', 'GET', null, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      // console.log(fetched)\r\n      setLinks(fetched)\r\n    } catch (e) {}\r\n  }, [token, request])\r\n\r\n  useEffect(() => {\r\n    fetchLinks()\r\n  }, [fetchLinks])\r\n\r\n  if (loading) {\r\n    return <Loader />\r\n  }\r\n\r\n  return <>{!loading && <LinksList links={links} />}</>\r\n}\r\n\r\nexport default LinksPage\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useMessage } from '../hooks/message.hook'\r\nimport { AuthContext } from '../context/AuthContext'\r\n\r\nfunction AuthPage() {\r\n  const auth = useContext(AuthContext)\r\n  const message = useMessage()\r\n  const { loading, error, request, clearError } = useHttp()\r\n  const [form, setForm] = useState({\r\n    email: '',\r\n    password: '',\r\n  })\r\n\r\n  useEffect(() => {\r\n    // console.log(error)\r\n    message(error)\r\n    clearError()\r\n  }, [error, message, clearError])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  const changeHandler = evt => {\r\n    setForm({ ...form, [evt.target.name]: evt.target.value })\r\n  }\r\n\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/register', 'POST', { ...form })\r\n      message(data.message)\r\n    } catch (e) {}\r\n  }\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/login', 'POST', { ...form })\r\n      return auth.login(data.token, data.userId)\r\n    } catch (e) {}\r\n  }\r\n\r\n  return (\r\n    <div className='row'>\r\n      <div className='col s6 offset-s3'>\r\n        <h2>Shorten a link</h2>\r\n        <div>\r\n          <div className='card blue darken-1'>\r\n            <div className='card-content white-text'>\r\n              <span className='card-title'>Authorization</span>\r\n              <div>\r\n                <label htmlFor='email'>Email</label>\r\n                <input\r\n                  placeholder='Enter Email'\r\n                  id='email'\r\n                  type='text'\r\n                  name='email'\r\n                  value={form.email}\r\n                  className='yellow-input'\r\n                  onChange={changeHandler}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor='password'>Password</label>\r\n                <input\r\n                  placeholder='Enter Password'\r\n                  id='password'\r\n                  type='password'\r\n                  name='password'\r\n                  value={form.password}\r\n                  className='yellow-input'\r\n                  onChange={changeHandler}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='card-action'>\r\n            <button\r\n              className='btn yellow darken-4'\r\n              disabled={loading}\r\n              onClick={loginHandler}\r\n            >\r\n              Log In\r\n            </button>\r\n            <button\r\n              className='btn grey lighten-1'\r\n              disabled={loading}\r\n              onClick={registerHandler}\r\n            >\r\n              Register\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AuthPage\r\n","import { useCallback } from 'react'\r\n\r\nexport const useMessage = () => {\r\n  return useCallback(text => {\r\n    if (window.M && text) {\r\n      window.M.toast({ html: text })\r\n    }\r\n  }, [])\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { AuthContext } from '../context/AuthContext'\r\n\r\nfunction CreatePage() {\r\n  const history = useHistory()\r\n  const auth = useContext(AuthContext)\r\n  const { request } = useHttp()\r\n  const [link, setLink] = useState('')\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  const pressHandler = async event => {\r\n    if (event.key === 'Enter') {\r\n      try {\r\n        const data = await request(\r\n          './api/link/generate',\r\n          'POST',\r\n          { from: link },\r\n          {\r\n            Authorization: `Bearer ${auth.token}`,\r\n          }\r\n        )\r\n        console.log(auth.token)\r\n        history.push(`/detail/${data.link._id}`)\r\n      } catch (e) {}\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='row'>\r\n      <div className='col s8 offset-s2' style={{ padding: '2rem' }}>\r\n        <div>\r\n          <label htmlFor='link'>Type your link</label>\r\n          <input\r\n            placeholder='Enter link'\r\n            id='link'\r\n            type='text'\r\n            value={link}\r\n            onChange={e => setLink(e.target.value)}\r\n            onKeyPress={pressHandler}\r\n          />\r\n        </div>\r\n      </div>\r\n      <h2>Create Page</h2>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CreatePage\r\n","import React from 'react'\r\n\r\nfunction LinkCard(props) {\r\n  return (\r\n    <div>\r\n      <h2>Link:</h2>\r\n      <p>\r\n        Your link:\r\n        <a href={props.link.to} target='_blank' rel='noreferrer noopener'>\r\n          {props.link.to}\r\n          {console.log(props.link)}\r\n        </a>\r\n      </p>\r\n      <p>\r\n        From:\r\n        <a href={props.link.from} rel='noreferrer noopener'>\r\n          {props.link.from}\r\n        </a>\r\n      </p>\r\n      <p>\r\n        Number of clicks: <strong>{props.link.clicks}</strong>\r\n      </p>\r\n      <p>\r\n        Date created:{' '}\r\n        <strong>{new Date(props.link.date).toLocaleDateString()}</strong>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LinkCard\r\n","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport Loader from '../components/Loader'\r\nimport LinkCard from '../components/LinkCard'\r\n\r\nfunction DetailPage() {\r\n  const { token } = useContext(AuthContext)\r\n  const { request, loading } = useHttp()\r\n  const [link, setLink] = useState(null)\r\n  const linkId = useParams().id\r\n\r\n  const getLink = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(`/api/link/${linkId}`, `GET`, null, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      setLink(fetched)\r\n      console.log(setLink)\r\n    } catch (e) {}\r\n  }, [token, linkId, request])\r\n\r\n  useEffect(() => {\r\n    getLink()\r\n  }, [getLink])\r\n\r\n  if (loading) {\r\n    return <Loader />\r\n  }\r\n  return <>{!loading && link && <LinkCard link={link} />}</>\r\n  // return <LinkCard link={link} name='MyLink' />\r\n}\r\n\r\nexport default DetailPage\r\n","import React, { useContext } from 'react'\r\nimport { NavLink, useHistory } from 'react-router-dom'\r\nimport { AuthContext } from '../context/AuthContext'\r\n\r\nfunction Navbar() {\r\n  const history = useHistory()\r\n  const auth = useContext(AuthContext)\r\n\r\n  const logoutHandler = event => {\r\n    event.preventDefault()\r\n    auth.logout()\r\n    history.push('/')\r\n  }\r\n  return (\r\n    <nav>\r\n      <div className='nav-wrapper'>\r\n        <NavLink to='/' className='brand-logo'>\r\n          Logo\r\n        </NavLink>\r\n        <ul id='nav-mobile' className='right hide-on-med-and-down'>\r\n          <li>\r\n            <NavLink to='/create'>Create</NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to='/links'>Links</NavLink>\r\n          </li>\r\n          <li>\r\n            <a href='#' onClick={logoutHandler}>\r\n              Logout\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Navbar\r\n","import React from 'react'\nimport 'materialize-css'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { useRoutes } from './routes'\nimport { useAuth } from './hooks/auth.hook'\nimport { AuthContext } from './context/AuthContext'\nimport Navbar from './components/Navbar'\nimport Loader from './components/Loader'\n\nfunction App() {\n  const { token, login, logout, userId, ready } = useAuth()\n  const isAuthenticated = !!token\n  const routes = useRoutes(isAuthenticated)\n  if (!ready) {\n    return <Loader />\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        token,\n        login,\n        logout,\n        userId,\n        isAuthenticated,\n      }}\n    >\n      <Router>\n        {isAuthenticated && <Navbar />}\n        <div className='container'>{routes}</div>\n      </Router>\n    </AuthContext.Provider>\n  )\n}\n\nexport default App\n","import { useCallback, useState, useEffect } from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null)\r\n  const [ready, setReady] = useState(false)\r\n  const [userId, setUserId] = useState(null)\r\n\r\n  const login = useCallback((jwtToken, id) => {\r\n    setToken(jwtToken)\r\n    setUserId(id)\r\n\r\n    localStorage.setItem(\r\n      storageName,\r\n      JSON.stringify({\r\n        userId: id,\r\n        token: jwtToken,\r\n      })\r\n    )\r\n  }, [])\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null)\r\n    setUserId(null)\r\n    localStorage.removeItem(storageName)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n    if (data && data.token) {\r\n      login(data.token, data.userId)\r\n    }\r\n    setReady(true)\r\n  }, [login])\r\n\r\n  return { login, logout, token, userId, ready }\r\n}\r\n","import React from 'react'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport LinksPage from './pages/LinksPage'\r\nimport AuthPage from './pages/AuthPage'\r\nimport CreatePage from './pages/CreatePage'\r\nimport DetailPage from './pages/DetailPage'\r\n\r\nexport const useRoutes = isAuthenticated => {\r\n  if (isAuthenticated) {\r\n    return (\r\n      <Switch>\r\n        <Route exact path='/links'>\r\n          <LinksPage />\r\n        </Route>{' '}\r\n        <Route exact path='/create'>\r\n          <CreatePage />\r\n        </Route>{' '}\r\n        <Route path='/detail/:id'>\r\n          <DetailPage />\r\n        </Route>\r\n        <Redirect to='/create' />\r\n      </Switch>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Switch>\r\n      <Route exact path='/'>\r\n        <AuthPage />\r\n      </Route>\r\n      <Redirect to='/' />\r\n    </Switch>\r\n  )\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}